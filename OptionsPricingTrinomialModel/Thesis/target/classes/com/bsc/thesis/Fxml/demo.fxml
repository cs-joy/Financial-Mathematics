<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.Insets?>
<?import javafx.collections.FXCollections?>

<GridPane xmlns="http://javafx.com/javafx/17" stylesheets="@../css/styles.css" xmlns:fx="http://javafx.com/fxml/1"
          fx:controller="com.bsc.thesis.ApplicationController"
          prefHeight="700" prefWidth="900"
          hgap="10" vgap="10"
          alignment="CENTER">

<padding>
    <Insets top="20" right="20" bottom="20" left="20"/>
</padding>

<columnConstraints>
    <ColumnConstraints hgrow="SOMETIMES" minWidth="120" prefWidth="150"/>
    <ColumnConstraints hgrow="ALWAYS" minWidth="200" prefWidth="300"/>
</columnConstraints>

<rowConstraints>
    <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
    <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
    <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
    <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
    <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
    <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
    <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
    <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
    <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
    <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
    <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
    <RowConstraints vgrow="SOMETIMES" minHeight="50"/>
    <RowConstraints vgrow="ALWAYS" minHeight="150"/>
</rowConstraints>

<!-- Header -->
<Text text="Options Pricing Calculator" styleClass="header-text"
      GridPane.columnIndex="0" GridPane.rowIndex="0" GridPane.columnSpan="2"/>

<!-- Option Type Selection -->
<Text text="Option Type:" GridPane.columnIndex="0" GridPane.rowIndex="1" styleClass="input-label"/>
<ComboBox fx:id="optionTypeComboBox" GridPane.columnIndex="1" GridPane.rowIndex="1">
    <items>
        <FXCollections fx:factory="observableArrayList">
            <String fx:value="European Call"/>
            <String fx:value="European Put"/>
            <String fx:value="American Call"/>
            <String fx:value="American Put"/>
            <String fx:value="Asian Option"/>
            <String fx:value="Barrier Option"/>
            <String fx:value="Cliquet Option"/>
            <String fx:value="Compound Option"/>
            <String fx:value="Lookback Option"/>
            <String fx:value="Bermudan Option"/>
        </FXCollections>
    </items>
</ComboBox>

<!-- Common Parameters -->
<Text text="Initial Stock Price (S0):" GridPane.columnIndex="0" GridPane.rowIndex="2" styleClass="input-label"/>
<TextField fx:id="stockPriceField" GridPane.columnIndex="1" GridPane.rowIndex="2"/>

<Text text="Strike Price (K):" GridPane.columnIndex="0" GridPane.rowIndex="3" styleClass="input-label"/>
<TextField fx:id="strikePriceField" GridPane.columnIndex="1" GridPane.rowIndex="3"/>

<Text text="Risk-free Rate (r):" GridPane.columnIndex="0" GridPane.rowIndex="4" styleClass="input-label"/>
<TextField fx:id="riskFreeRateField" GridPane.columnIndex="1" GridPane.rowIndex="4"/>

<Text text="Volatility (Ïƒ):" GridPane.columnIndex="0" GridPane.rowIndex="5" styleClass="input-label"/>
<TextField fx:id="volatilityField" GridPane.columnIndex="1" GridPane.rowIndex="5"/>

<Text text="Time to Maturity (T):" GridPane.columnIndex="0" GridPane.rowIndex="6" styleClass="input-label"/>
<TextField fx:id="timeToMaturityField" GridPane.columnIndex="1" GridPane.rowIndex="6"/>

<Text text="Number of Steps (N):" GridPane.columnIndex="0" GridPane.rowIndex="7" styleClass="input-label"/>
<TextField fx:id="numStepsField" text="100" GridPane.columnIndex="1" GridPane.rowIndex="7"/>

<!-- Tree Parameters -->
<VBox fx:id="treeParamsContainer" visible="true" managed="true"
      GridPane.columnIndex="0" GridPane.rowIndex="8" GridPane.columnSpan="2" spacing="5">
    <Text text="Tree Parameters:" styleClass="section-header"/>
    <GridPane hgap="10" vgap="5">
        <columnConstraints>
            <ColumnConstraints hgrow="SOMETIMES" minWidth="120" prefWidth="150"/>
            <ColumnConstraints hgrow="ALWAYS" minWidth="200" prefWidth="300"/>
        </columnConstraints>
        <rowConstraints>
            <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
            <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
        </rowConstraints>
        <Text text="Time Step Size (h):" GridPane.columnIndex="0" GridPane.rowIndex="0" styleClass="input-label"/>
        <TextField fx:id="timeStepField" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
        <Text text="Up Factor (u):" GridPane.columnIndex="0" GridPane.rowIndex="1" styleClass="input-label"/>
        <TextField fx:id="upFactorField" GridPane.columnIndex="1" GridPane.rowIndex="1"/>
    </GridPane>
</VBox>

<!-- Exotic Option Parameters Container -->
<VBox fx:id="exoticParamsContainer" visible="false" managed="false"
      GridPane.columnIndex="0" GridPane.rowIndex="9" GridPane.columnSpan="2" spacing="5">
    <Text text="Exotic Option Parameters:" styleClass="section-header"/>

    <!-- Barrier Options -->
    <VBox fx:id="barrierParams" visible="false" managed="false" spacing="5">
        <GridPane hgap="10" vgap="5">
            <columnConstraints>
                <ColumnConstraints hgrow="SOMETIMES" minWidth="120" prefWidth="150"/>
                <ColumnConstraints hgrow="ALWAYS" minWidth="200" prefWidth="300"/>
            </columnConstraints>
            <rowConstraints>
                <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
                <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
            </rowConstraints>
            <Text text="Barrier Price:" GridPane.columnIndex="0" GridPane.rowIndex="0" styleClass="input-label"/>
            <TextField fx:id="barrierPriceField" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
            <Text text="Barrier Type:" GridPane.columnIndex="0" GridPane.rowIndex="1" styleClass="input-label"/>
            <ComboBox fx:id="barrierTypeComboBox" GridPane.columnIndex="1" GridPane.rowIndex="1">
                <items>
                    <FXCollections fx:factory="observableArrayList">
                        <String fx:value="Down-and-Out"/>
                        <String fx:value="Down-and-In"/>
                        <String fx:value="Up-and-Out"/>
                        <String fx:value="Up-and-In"/>
                    </FXCollections>
                </items>
            </ComboBox>
        </GridPane>
    </VBox>

    <!-- Asian Options -->
    <VBox fx:id="asianParams" visible="false" managed="false" spacing="5">
        <Text text="Asian options use arithmetic average pricing" styleClass="info-text"/>
    </VBox>

    <!-- Cliquet Options -->
    <VBox fx:id="cliquetParams" visible="false" managed="false" spacing="5">
        <GridPane hgap="10" vgap="5">
            <columnConstraints>
                <ColumnConstraints hgrow="SOMETIMES" minWidth="120" prefWidth="150"/>
                <ColumnConstraints hgrow="ALWAYS" minWidth="200" prefWidth="300"/>
            </columnConstraints>
            <rowConstraints>
                <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
                <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
                <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
            </rowConstraints>
            <Text text="Number of Periods:" GridPane.columnIndex="0" GridPane.rowIndex="0" styleClass="input-label"/>
            <TextField fx:id="numPeriodsField" text="4" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
            <Text text="Local Cap:" GridPane.columnIndex="0" GridPane.rowIndex="1" styleClass="input-label"/>
            <TextField fx:id="localCapField" text="0.1" GridPane.columnIndex="1" GridPane.rowIndex="1"/>
            <Text text="Local Floor:" GridPane.columnIndex="0" GridPane.rowIndex="2" styleClass="input-label"/>
            <TextField fx:id="localFloorField" text="-0.1" GridPane.columnIndex="1" GridPane.rowIndex="2"/>
        </GridPane>
    </VBox>

    <!-- Compound Options -->
    <VBox fx:id="compoundParams" visible="false" managed="false" spacing="5">
        <GridPane hgap="10" vgap="5">
            <columnConstraints>
                <ColumnConstraints hgrow="SOMETIMES" minWidth="120" prefWidth="150"/>
                <ColumnConstraints hgrow="ALWAYS" minWidth="200" prefWidth="300"/>
            </columnConstraints>
            <rowConstraints>
                <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
                <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
            </rowConstraints>
            <Text text="Compound Strike (K1):" GridPane.columnIndex="0" GridPane.rowIndex="0" styleClass="input-label"/>
            <TextField fx:id="compoundStrikeField" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
            <Text text="Compound Maturity (T1):" GridPane.columnIndex="0" GridPane.rowIndex="1" styleClass="input-label"/>
            <TextField fx:id="compoundMaturityField" GridPane.columnIndex="1" GridPane.rowIndex="1"/>
        </GridPane>
    </VBox>

    <!-- Bermudan Options -->
    <VBox fx:id="bermudanParams" visible="false" managed="false" spacing="5">
        <GridPane hgap="10" vgap="5">
            <columnConstraints>
                <ColumnConstraints hgrow="SOMETIMES" minWidth="120" prefWidth="150"/>
                <ColumnConstraints hgrow="ALWAYS" minWidth="200" prefWidth="300"/>
            </columnConstraints>
            <rowConstraints>
                <RowConstraints vgrow="SOMETIMES" minHeight="30"/>
            </rowConstraints>
            <Text text="Exercise Dates (comma-separated):" GridPane.columnIndex="0" GridPane.rowIndex="0" styleClass="input-label"/>
            <TextField fx:id="exerciseDatesField" text="25,50,75" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
        </GridPane>
    </VBox>

    <!-- Lookback Options -->
    <VBox fx:id="lookbackParams" visible="false" managed="false" spacing="5">
        <Text text="Lookback options use floating strike (calls) or fixed strike (puts)" styleClass="info-text"/>
    </VBox>
</VBox>

<!-- Action Buttons -->
<HBox spacing="15" alignment="CENTER"
      GridPane.columnIndex="0" GridPane.rowIndex="10" GridPane.columnSpan="2">
    <Button text="Calculate" fx:id="calculateButton"
            prefWidth="120" onAction="#handleCalculate" styleClass="action-button"/>
    <Button text="Save Results" fx:id="saveButton"
            prefWidth="120" onAction="#handleSave" styleClass="action-button"/>
    <Button text="Clear" fx:id="clearButton"
            prefWidth="120" onAction="#handleClear" styleClass="action-button"/>
</HBox>

<!-- Results Area -->
<VBox GridPane.columnIndex="0" GridPane.rowIndex="11" GridPane.columnSpan="2" spacing="5">
    <Text text="Results:" styleClass="section-header"/>
    <TextArea fx:id="resultTextArea" editable="false" prefHeight="150"
              styleClass="result-text"/>
</VBox>

<!-- Status Bar -->
<HBox spacing="10" alignment="CENTER_LEFT"
      GridPane.columnIndex="0" GridPane.rowIndex="12" GridPane.columnSpan="2">
    <Text fx:id="statusText" text="Ready" styleClass="status-text"/>
</HBox>

</GridPane>